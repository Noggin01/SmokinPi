<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Smokin'Pi by Noggin01</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Smokin'Pi</h1>
        <p class="header">Raspberry Pi Based Propane Smoker Controller</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/Noggin01/SmokinPi/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/Noggin01/SmokinPi/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/Noggin01/SmokinPi">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/Noggin01">Noggin01</a></p>


      </header>
      <section>
        <h1>
<a name="smokinpi" class="anchor" href="#smokinpi"><span class="octicon octicon-link"></span></a>Smokin'Pi</h1>

<p>The Smokin'Pi is a solution to controlling your propane smoker by adjusting the flow of propane via a servo controlled valve.  A needle valve is used to improve the resolution of the controller and to also allow increased torque output from the servo motor.  Control is provided via a web interface.</p>

<h2>
<a name="temperature-monitoring" class="anchor" href="#temperature-monitoring"><span class="octicon octicon-link"></span></a>Temperature Monitoring</h2>

<p>Temperature monitoring is achieved through the use of multiple thermistor probes.  Since the Raspberry Pi doesn't have any analog inputs available, an ADC IC with SPI communication was chosen.  The selected part is a TI TLC1543IN.</p>

<p>The TI TLC1543IN is designed to run from a 5v power rail.  The SPI inputs on the TLC1543IN are compatible with 3.3v signaling, but the outputs are driven to 5v.  Simple circuitry is utilized to ensure that the voltage presented to the Raspberry Pi does not exceed 3.3v.</p>

<h2>
<a name="temperature-control" class="anchor" href="#temperature-control"><span class="octicon octicon-link"></span></a>Temperature Control</h2>

<p>Temperature control is achieved via a motorized needle valve which limits the flow of propane to the burner.  The propane pressure regulator is still required and the main temperature knob present on the smoker should still be utilized as a manual shutoff.  During the smoking process, the main temperature knob should be left fully open so that the needle valve will be the limiting component.</p>

<p>A multi-turn servo is physically attached to the handle on the needle valve.  The Raspberry Pi's PWM output is used to control the servo.  Servo signaling is not true PWM as neither the duty cycle nor the frequency of the signal matters.  The control mechanism of the signaling is derived solely from the positive pulse width of the signal.  Despite the fact that the servo control signal isn't truly a PWM signal, a PWM peripheral on the processor is fully capable of driving the servo.</p>

<p>The control signals to a servo are not standardized, so on different models of servos, the same pulse widths will result in different physical positions of the servo.  Each model of servo will need to be tested when used in this project.  Testing should be done to determine when the servo is at its physical limits so that the servo will not be instructed to a position beyond its capabilities.  Additional testing is also needed to determine when the servo is at the physical limits of the needle valve.</p>

<h2>
<a name="pid-controller" class="anchor" href="#pid-controller"><span class="octicon octicon-link"></span></a>PID Controller</h2>

<p>A PID controller is used to close the loop on the setpoint vs the actual temperature.  </p>

<p>From the <a href="http://en.wikipedia.org/wiki/PID_controller">PID article on Wikipedia</a>:</p>

<blockquote>
<p>A proportional-integral-derivative controller (PID controller) is a generic control loop feedback mechanism (controller) widely used in industrial control systems. A PID controller calculates an "error" value as the difference between a measured process variable and a desired setpoint. The controller attempts to minimize the error by adjusting the process control inputs.</p>

<p>The PID controller algorithm involves three separate constant parameters, and is accordingly sometimes called three-term control: the proportional, the integral and derivative values, denoted P, I, and D. Simply put, these values can be interpreted in terms of time: P depends on the present error, I on the accumulation of past errors, and D is a prediction of future errors, based on current rate of change.  The weighted sum of these three actions is used to adjust the process via a control element such as the position of a control valve, a damper, or the power supplied to a heating element.</p>
</blockquote>

<h2>
<a name="logging" class="anchor" href="#logging"><span class="octicon octicon-link"></span></a>Logging</h2>

<p>A SQL database is used to log the state of the entire system.  The logged values include the following:</p>

<ul>
<li>Current temperature of each probe</li>
<li>Each of the PID variables</li>
<li>Time of day</li>
<li>Temperature setpoint for the cabinet</li>
<li>Desired temperature for each of the meat probes<br>
</li>
</ul><h2>
<a name="web-interface" class="anchor" href="#web-interface"><span class="octicon octicon-link"></span></a>Web Interface</h2>

<p>Apache is used to provide a web interface which allows for remote monitoring and control of the system.  Setpoints for cabinet temperature and the finishing temperature for each of the meat probes may be specified on the web page.  Current temperatures of each probe, meat and cabinet, may be monitored from the web page.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
